<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fantasy Survey Tool</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="mobile-container">
        <div class="app-container">

            <!-- Header -->
            <header class="app-header">
                <div class="logo" onclick="navigateTo('index.html')">설문 마법사</div>
                <nav>
                    <button class="nav-btn active" onclick="navigateTo('index.html')">대시보드</button>
                    <button class="nav-btn" onclick="navigateTo('dashboard.html')">설문 관리</button>
                    <button class="nav-btn" onclick="navigateTo('analytics.html')">결과 분석</button>
                </nav>
            </header>

            <!-- Dashboard Main -->
            <main class="dashboard">
                <h1>마법의 설문 제작소에 오신 것을 환영합니다!</h1>

                <div class="dashboard-grid">
                    <div class="dashboard-card new-survey">
                        <h2>새 설문조사 만들기</h2>
                        <p>마법의 설문을 시작해보세요!</p>
                        <button id="openAiGenModal" class="primary-btn">✨ AI 설문 만들기 시작</button>
                    </div>

                    <div class="dashboard-card" id="inProgressQuestContainer">
                        <h3>작업 중인 설문</h3>
                        <div class="empty-quest-item">최근 작업한 설문이 없습니다.</div>
                    </div>

                    <div class="dashboard-card" id="questStatsContainer">
                        <h3>설문 통계</h3>
                        <div class="empty-quest-item">통계 데이터가 없습니다.</div>
                    </div>
                </div>
            </main>

            <!-- 설문 제작 모달 -->
            <div id="surveyModal" class="modal">
                <div class="modal-content">

                    <span class="close">&times;</span>

                    <!-- Steps -->
                    <div class="creation-steps">
                        <div class="step active" data-step="1">1. 설문 기본 정보</div>
                        <div class="step" data-step="2">2. 질문 디자인</div>
                        <div class="step" data-step="3">3. 보상 설정</div>
                    </div>

                    <!-- STEP 1 -->
                    <div id="step1" class="step-content active">
                        <h2>설문 기본 정보</h2>

                        <div class="form-group">
                            <label>설문 제목</label>
                            <input id="surveyTitle" type="text" class="form-control" placeholder="예: 마법 시험 설문">
                        </div>

                        <div class="form-group">
                            <label>설문 설명</label>
                            <textarea id="surveyDescription" class="form-control" rows="3" placeholder="설문 설명을 입력하세요"></textarea>
                        </div>

                        <div class="form-actions">
                            <button class="btn btn-secondary close">취소</button>
                            <button class="btn btn-primary next-step" data-next="2">다음 단계</button>
                        </div>
                    </div>

                    <!-- STEP 2 -->
                    <div id="step2" class="step-content">
                        <h2>질문 디자인</h2>

                        <div class="question-blocks">
                            <div class="question-block">
                                <div class="question-header">
                                    <h3>질문 1</h3>
                                    <div class="question-actions">
                                        <button class="btn-icon">🎨</button>
                                        <button class="btn-icon">🗑️</button>
                                    </div>
                                </div>

                                <textarea class="form-control" rows="2" placeholder="질문 안내 문구를 입력하세요"></textarea>

                                <select class="form-control">
                                    <option>객관식 (단일 선택)</option>
                                    <option>주관식</option>
                                </select>

                                <div class="answer-options">
                                    <div class="answer-option">
                                        <input type="text" class="form-control" value="예">
                                        <button class="btn-icon">🗑️</button>
                                    </div>
                                    <div class="answer-option">
                                        <input type="text" class="form-control" value="아니오">
                                        <button class="btn-icon">🗑️</button>
                                    </div>
                                    <button class="btn-text add-option">+ 선택지 추가</button>
                                </div>
                            </div>

                            <button class="btn btn-outline add-chapter">+ 새 챕터 추가</button>
                        </div>

                        <div class="form-actions">
                            <button class="btn btn-secondary prev-step" data-prev="1">이전</button>
                            <button class="btn btn-primary next-step" data-next="3">다음</button>
                        </div>
                    </div>

                    <!-- STEP 3 -->
                    <div id="step3" class="step-content">
                        <h2>보상 설정</h2>

                        <textarea class="form-control" rows="3">축하합니다! 설문 완료입니다!</textarea>

                        <div class="form-actions">
                            <button class="btn btn-secondary prev-step" data-prev="2">이전</button>
                            <button id="completeSurvey" class="btn btn-primary">설문 완성하기</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 완료 모달 -->
            <div id="completionModal" class="modal">
                <div class="modal-content completion">

                    <h2>🎉 설문이 완성되었습니다!</h2>
                    <p>아래 링크를 통해 설문을 공유하세요.</p>

                    <div class="qr-code-container">
                        <img id="qrCodeImage" src="">
                    </div>

                    <div class="share-link">
                        <input id="shareLinkInput" type="text" readonly>
                        <button class="btn-icon" id="copyLinkBtn">📋</button>
                    </div>

                    <div class="completion-actions">
                        <button id="closeCompletion" class="btn btn-secondary">닫기</button>
                        <a id="viewResults" class="btn btn-primary">결과 분석 보기</a>
                    </div>

                </div>
            </div>

        </div>
    </div>

    <script src="script.js"></script>

    <!-- AI 설문 생성 모달 -->
    <div id="aiGenModal" class="modal">
        <div class="modal-content ai-modal">
            <span class="close" id="aiGenClose">&times;</span>
            <h2>AI 설문 생성</h2>
            <p class="ai-modal-desc">단계별 입력 후 AI가 설문을 생성하며, 최종 저장 전에 미리보기를 제공합니다.</p>

            <div class="ai-modal-body">
                <div class="form-group">
                    <label for="aiTopicInput">설문의 주제를 입력해주세요.</label>
                    <input type="text" id="aiTopicInput" class="form-control" placeholder="예: 대학 축제 만족도 조사, 게임 성향 분석 등" />
                </div>

                <div class="form-group">
                    <label>주제 예시</label>
                    <div class="ai-topic-presets">
                        <button type="button" class="ai-topic-btn" data-topic="게임 성향 분석">게임 성향 분석</button>
                        <button type="button" class="ai-topic-btn" data-topic="직장 만족도 조사">직장 만족도 조사</button>
                        <button type="button" class="ai-topic-btn" data-topic="고객 만족도 조사">고객 만족도 조사</button>
                        <button type="button" class="ai-topic-btn" data-topic="교육 / 강의 만족도">교육 / 강의 만족도</button>
                    </div>
                </div>

                <div class="form-group">
                    <label>질문 개수를 선택해주세요.</label>
                    <div class="ai-count-range">
                        <input type="range" id="aiCountSlider" min="3" max="10" value="5">
                        <div class="ai-count-display">
                            <span id="aiCountValue">5</span>문항
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-actions ai-actions">
                <button class="btn btn-secondary" id="aiGenCancel">취소</button>
                <button class="btn btn-primary" id="aiGenerateBtn">AI로 생성</button>
            </div>
        </div>
    </div>

    <!-- AI 생성 설문 미리보기 & 편집 모달 -->
    <div id="aiPreviewModal" class="modal">
        <div class="modal-content ai-preview-modal">
            <span class="close" id="aiPreviewClose">&times;</span>
            <h2>AI 설문 미리보기 & 편집</h2>
            <div class="ai-preview-meta">
                <h3 id="aiPreviewModalTitle">-</h3>
                <p id="aiPreviewModalDesc">-</p>
            </div>
            <div class="ai-preview-tabs">
                <button type="button" class="ai-preview-tab active" data-mode="edit">편집 모드</button>
                <button type="button" class="ai-preview-tab" data-mode="preview">미리보기</button>
            </div>
            <div class="ai-preview-body">
                <div id="aiPreviewEditPanel" class="ai-preview-edit-panel">
                    <div id="aiPreviewQuestionContainer" class="ai-preview-questions"></div>
                    <div class="ai-preview-add-question">
                        <button type="button" class="btn btn-outline" id="aiAddQuestionBtn">+ 새 질문 추가</button>
                    </div>
                </div>
                <div id="aiPreviewLivePanel" class="ai-preview-live-panel" style="display:none;"></div>
            </div>
            <div class="form-actions ai-preview-actions">
                <button class="btn btn-secondary" id="aiPreviewCancelBtn">닫기</button>
                <button class="btn btn-primary" id="aiPreviewSaveBtn">설문 시작</button>
            </div>
        </div>
    </div>

    <script>
        function navigateTo(page) {
            window.location.href = page;
        }
    </script>

</body>
</html>
