<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fantasy Quest Survey Tool</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="mobile-container">
        <div class="app-container">

            <!-- Header -->
            <header class="app-header">
                <div class="logo">퀘스트 설문 마법사</div>
                <nav>
                    <button class="nav-btn active" onclick="navigateTo('index.html')">대시보드</button>
                    <button class="nav-btn" onclick="navigateTo('dashboard.html')">설문 관리</button>
                    <button class="nav-btn" onclick="navigateTo('analytics.html')">결과 분석</button>
                </nav>
            </header>

            <!-- Dashboard Main -->
            <main class="dashboard">
                <h1>마법의 설문 제작소에 오신 것을 환영합니다!</h1>

                <div class="dashboard-grid">
                    <div class="dashboard-card new-survey">
                        <h2>새 설문조사 만들기</h2>
                        <p>마법의 퀘스트를 시작해보세요!</p>
                        <button id="openAiGenModal" class="primary-btn">✨ AI 설문 만들기 시작</button>
                    </div>

                    <div class="dashboard-card" id="inProgressQuestContainer">
                        <h3>작업 중인 퀘스트</h3>
                        <div class="empty-quest-item">최근 작업한 설문이 없습니다.</div>
                    </div>

                    <div class="dashboard-card" id="questStatsContainer">
                        <h3>퀘스트 통계</h3>
                        <div class="empty-quest-item">통계 데이터가 없습니다.</div>
                    </div>
                </div>
            </main>

            <!-- 설문 제작 모달 -->
            <div id="surveyModal" class="modal">
                <div class="modal-content">

                    <span class="close">&times;</span>

                    <!-- Steps -->
                    <div class="creation-steps">
                        <div class="step active" data-step="1">1. 퀘스트 기본 정보</div>
                        <div class="step" data-step="2">2. 질문 디자인</div>
                        <div class="step" data-step="3">3. 보상 설정</div>
                    </div>

                    <!-- STEP 1 -->
                    <div id="step1" class="step-content active">
                        <h2>퀘스트 기본 정보</h2>

                        <div class="form-group">
                            <label>퀘스트 제목</label>
                            <input id="surveyTitle" type="text" class="form-control" placeholder="예: 마법 시험 퀘스트">
                        </div>

                        <div class="form-group">
                            <label>퀘스트 설명</label>
                            <textarea id="surveyDescription" class="form-control" rows="3" placeholder="퀘스트 설명을 입력하세요"></textarea>
                        </div>

                        <div class="form-group">
                            <label>NPC 아바타 선택</label>
                            <div class="avatar-selection">
                                <div class="avatar-option selected">
                                    <span>마법사</span>
                                </div>
                                <div class="avatar-option"><span>기사</span></div>
                                <div class="avatar-option"><span>상인</span></div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button class="btn btn-secondary close">취소</button>
                            <button class="btn btn-primary next-step" data-next="2">다음 단계</button>
                        </div>
                    </div>

                    <!-- STEP 2 -->
                    <div id="step2" class="step-content">
                        <h2>질문 디자인</h2>

                        <div class="question-blocks">
                            <div class="question-block">
                                <div class="question-header">
                                    <h3>Chapter 1</h3>
                                    <div class="question-actions">
                                        <button class="btn-icon">🎨</button>
                                        <button class="btn-icon">🗑️</button>
                                    </div>
                                </div>

                                <textarea class="form-control" rows="2" placeholder="NPC 대사 입력"></textarea>

                                <select class="form-control">
                                    <option>객관식 (단일 선택)</option>
                                    <option>주관식</option>
                                </select>

                                <div class="answer-options">
                                    <div class="answer-option">
                                        <input type="text" class="form-control" value="예">
                                        <button class="btn-icon">🗑️</button>
                                    </div>
                                    <div class="answer-option">
                                        <input type="text" class="form-control" value="아니오">
                                        <button class="btn-icon">🗑️</button>
                                    </div>
                                    <button class="btn-text add-option">+ 선택지 추가</button>
                                </div>
                            </div>

                            <button class="btn btn-outline add-chapter">+ 새 챕터 추가</button>
                        </div>

                        <div class="form-actions">
                            <button class="btn btn-secondary prev-step" data-prev="1">이전</button>
                            <button class="btn btn-primary next-step" data-next="3">다음</button>
                        </div>
                    </div>

                    <!-- STEP 3 -->
                    <div id="step3" class="step-content">
                        <h2>퀘스트 보상 설정</h2>

                        <textarea class="form-control" rows="3">축하합니다! 퀘스트 완료입니다!</textarea>

                        <div class="form-actions">
                            <button class="btn btn-secondary prev-step" data-prev="2">이전</button>
                            <button id="completeSurvey" class="btn btn-primary">퀘스트 완성하기</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 완료 모달 -->
            <div id="completionModal" class="modal">
                <div class="modal-content completion">

                    <h2>🎉 퀘스트가 완성되었습니다!</h2>
                    <p>아래 링크를 통해 퀘스트를 공유하세요.</p>

                    <div class="qr-code-container">
                        <img id="qrCodeImage" src="">
                    </div>

                    <div class="share-link">
                        <input id="shareLinkInput" type="text" readonly>
                        <button class="btn-icon" id="copyLinkBtn">📋</button>
                    </div>

                    <div class="completion-actions">
                        <button id="closeCompletion" class="btn btn-secondary">닫기</button>
                        <a id="viewResults" class="btn btn-primary">결과 분석 보기</a>
                    </div>

                </div>
            </div>

        </div>
    </div>

    <script src="script.js"></script>

    <!-- AI 설문 생성 모달 -->
    <div id="aiGenModal" class="modal">
      <div class="modal-content">
        <span class="close" id="aiGenClose">&times;</span>
        <h2>AI 설문 생성</h2>
        <div class="form-group">
          <label>설문 주제</label>
          <input type="text" id="aiTopicInput" class="form-control" placeholder="예: 직장인 스트레스 검사" />
        </div>
        <div class="form-group">
          <label>문항 수 (1~10)</label>
          <input type="number" id="aiQuestionCountInput" class="form-control" min="1" max="10" value="5" />
        </div>
        <div class="form-group">
          <label>분위기 스타일</label>
          <select id="aiStyleSelect" class="form-control">
            <option value="">기본</option>
            <option value="epic_fantasy">장엄한 판타지</option>
            <option value="romance">로맨스</option>
            <option value="horror">호러</option>
          </select>
          <div style="font-size:0.85rem;color:#6b7280; margin-top:6px;">/styles/{style_id}.json 이 존재하면 해당 템플릿을 추가 반영합니다.</div>
        </div>
        <div class="form-group" style="display:flex; align-items:center; gap:8px;">
          <input type="checkbox" id="aiIncludeNameInput" />
          <label for="aiIncludeNameInput" style="margin:0;">이름 문항 포함하기</label>
        </div>
        <div class="form-actions">
          <button class="btn btn-secondary" id="aiGenCancel">취소</button>
          <button class="btn btn-primary" id="aiGenerateBtn">AI로 생성</button>
        </div>
      </div>
    </div>

    <script>
        function navigateTo(page) {
            window.location.href = page;
        }
    </script>

</body>
</html>
